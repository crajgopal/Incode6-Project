(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[155],{"./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/source-map-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./vuejs/components/mediaViewer/WaitingPlayer.vue?vue&type=script&lang=js&":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;t("./node_modules/core-js/modules/es.number.constructor.js");var r={props:{height:Number,notConverted:Boolean,noThumbnail:Boolean,notReadyLabel:{default:mediaViewerLg.processing,type:String},ready:Boolean},data:function e(){return{mediaViewerLg:mediaViewerLg}}};n.default=r},"./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/source-map-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./vuejs/components/mediaViewer/viewers/MediaViewerPDF.vue?vue&type=script&lang=js&":function(e,n,t){"use strict";t("./node_modules/core-js/modules/es.object.to-string.js");t("./node_modules/core-js/modules/es.promise.js");Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;t("./node_modules/regenerator-runtime/runtime.js");t("./node_modules/core-js/modules/es.array.concat.js");var r=c(t("./node_modules/vue/dist/vue.min.js"));var i=c(t("./vuejs/components/mediaViewer/waitingPlayer.mixin.js"));var s=c(t("./vuejs/components/mediaViewer/WaitingPlayer.vue"));var a=c(t("./vuejs/components/mediaViewer/viewers/fullscreen.mixin.js"));var o=c(t("./vuejs/components/mediaViewer/viewers/viewer.mixin.js"));var u=t("./vuejs/services/medias/index.js");function c(e){return e&&e.__esModule?e:{default:e}}function l(e,n,t,r,i,s,a){try{var o=e[s](a);var u=o.value}catch(e){t(e);return}if(o.done){n(u)}else{Promise.resolve(u).then(r,i)}}function d(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function a(e){l(s,r,i,a,o,"next",e)}function o(e){l(s,r,i,a,o,"throw",e)}a(undefined)}))}}var m=500;var f={components:{WaitingPlayer:s.default},mixins:[a.default,o.default,i.default],data:function e(){var n=window.location.origin;var t=this.media,r=t.company,i=t._id;return{hasDownloadButton:!!this.media.downloadable&&this.media.url,url:"/static/pdf-viewer/web/viewer.html?file=".concat(n,"/api/medias/proxy/").concat(r,"/").concat(i,"/pdf"),mediaViewerLg:mediaViewerLg}},computed:{hasConversionFailed:function e(){return!!this.media.PDFConversionError},isReady:function e(){var n=this;return t()||this.media.convertedToPDF;function t(){return n.media.extension==="pdf"}},pdfHeight:function e(){return Math.max(m,this.height||0)}},watch:{isFullscreen:function e(){if(this.isFullscreen){this.selectPDFIframeElement("#presentationMode").classList.add("toggled")}else{this.selectPDFIframeElement("#presentationMode").classList.remove("toggled")}},isReady:{immediate:true,handler:function e(){var n=this;return d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return n.$nextTick();case 2:n.makeCustomChangesOnPDFViewer();case 3:case"end":return t.stop()}}}),e)})))()}}},methods:{fetch:function e(){var n=this;return d(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function e(i){while(1){switch(i.prev=i.next){case 0:(0,u.clearCache)(n.media._id);i.next=3;return(0,u.getCache)(n.media._id);case 3:t=i.sent;r.default.set(n,"media",t);case 5:case"end":return i.stop()}}}),e)})))()},makeCustomChangesOnPDFViewer:function e(){var n=this;if(!this.isReady){return}var t=this.$refs.pdfIframe;if(!t){return}if(t.onload){return}var r=this;t.onload=function(){var e=n;s("#presentationMode");s("#secondaryPresentationMode");if(!n.hasDownloadButton){c()}i("#download");i("#secondaryDownload");function i(n){a(n);var t=e.selectPDFIframeElement(n);t.onclick=function(){r.onDownload();var n=(0,u.buildUrl)(e.media.url,null,true);window.open(n)}}function s(e){a(e);o(e)}function a(n){var t=e.selectPDFIframeElement(n);var r=t.cloneNode(true);t.parentNode.replaceChild(r,t)}function o(n){var r=e.selectPDFIframeElement(n);r.onclick=d(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function n(r){while(1){switch(r.prev=r.next){case 0:r.next=2;return e.toggleFullscreen(t);case 2:case"end":return r.stop()}}}),n)})))}function c(){e.selectPDFIframeElement("#print").style.display="none";e.selectPDFIframeElement("#download").style.display="none";e.selectPDFIframeElement("#viewBookmark").style.display="none"}}},selectPDFIframeElement:function e(n){return this.$refs.pdfIframe.contentDocument.querySelector(n)}}};n.default=f},"./vuejs/components/mediaViewer/WaitingPlayer.vue":function(e,n,t){"use strict";t.r(n);var r=t("./vuejs/components/mediaViewer/WaitingPlayer.vue?vue&type=template&id=47828e9a&scoped=true&");var i=t("./vuejs/components/mediaViewer/WaitingPlayer.vue?vue&type=script&lang=js&");for(var s in i)if(["default"].indexOf(s)<0)(function(e){t.d(n,e,(function(){return i[e]}))})(s);var a=t("./vuejs/components/mediaViewer/WaitingPlayer.vue?vue&type=style&index=0&id=47828e9a&scoped=true&lang=scss&");var o=t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js");var u=Object(o["a"])(i["default"],r["a"],r["b"],false,null,"47828e9a",null);n["default"]=u.exports},"./vuejs/components/mediaViewer/WaitingPlayer.vue?vue&type=script&lang=js&":function(e,n,t){"use strict";t.r(n);var r=t("./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/source-map-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./vuejs/components/mediaViewer/WaitingPlayer.vue?vue&type=script&lang=js&");var i=t.n(r);for(var s in r)if(["default"].indexOf(s)<0)(function(e){t.d(n,e,(function(){return r[e]}))})(s);n["default"]=i.a},"./vuejs/components/mediaViewer/WaitingPlayer.vue?vue&type=style&index=0&id=47828e9a&scoped=true&lang=scss&":function(e,n,t){"use strict"},"./vuejs/components/mediaViewer/WaitingPlayer.vue?vue&type=template&id=47828e9a&scoped=true&":function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));t.d(n,"b",(function(){return i}));var r=function(){var e=this;var n=e.$createElement;var t=e._self._c||n;return e.notConverted?t("div",{staticClass:"conversion-has-failed color-bg-grey-level-1 color-text-grey-level-4",style:{height:e.height+"px"}},[e._v("\n    "+e._s(e.mediaViewerLg.conversionHasFailed)+"\n")]):e.noThumbnail?t("div",{staticClass:"color-bg-grey-level-1 color-text-grey-level-4",style:{height:e.height+"px"}}):!e.ready?t("div",{staticClass:"waiting-player loading-anim-dark color-bg-grey-level-1 color-text-grey-level-4",style:{height:e.height+"px"}},[t("span",[e._v(e._s(e.notReadyLabel))])]):t("div",[e._t("default")],2)};var i=[]},"./vuejs/components/mediaViewer/viewers/MediaViewerPDF.vue":function(e,n,t){"use strict";t.r(n);var r=t("./vuejs/components/mediaViewer/viewers/MediaViewerPDF.vue?vue&type=template&id=234e94ab&scoped=true&");var i=t("./vuejs/components/mediaViewer/viewers/MediaViewerPDF.vue?vue&type=script&lang=js&");for(var s in i)if(["default"].indexOf(s)<0)(function(e){t.d(n,e,(function(){return i[e]}))})(s);var a=t("./vuejs/components/mediaViewer/viewers/MediaViewerPDF.vue?vue&type=style&index=0&id=234e94ab&scoped=true&lang=scss&");var o=t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js");var u=Object(o["a"])(i["default"],r["a"],r["b"],false,null,"234e94ab",null);n["default"]=u.exports},"./vuejs/components/mediaViewer/viewers/MediaViewerPDF.vue?vue&type=script&lang=js&":function(e,n,t){"use strict";t.r(n);var r=t("./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/source-map-loader/dist/cjs.js!./node_modules/vue-loader/lib/index.js?!./vuejs/components/mediaViewer/viewers/MediaViewerPDF.vue?vue&type=script&lang=js&");var i=t.n(r);for(var s in r)if(["default"].indexOf(s)<0)(function(e){t.d(n,e,(function(){return r[e]}))})(s);n["default"]=i.a},"./vuejs/components/mediaViewer/viewers/MediaViewerPDF.vue?vue&type=style&index=0&id=234e94ab&scoped=true&lang=scss&":function(e,n,t){"use strict"},"./vuejs/components/mediaViewer/viewers/MediaViewerPDF.vue?vue&type=template&id=234e94ab&scoped=true&":function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));t.d(n,"b",(function(){return i}));var r=function(){var e=this;var n=e.$createElement;var t=e._self._c||n;return t("WaitingPlayer",{attrs:{height:e.pdfHeight,notConverted:e.hasConversionFailed,ready:e.isReady}},[t("div",{staticClass:"pdf"},[t("iframe",{ref:"pdfIframe",staticClass:"pdf-iframe",style:{"min-height":e.pdfHeight+"px"},attrs:{allowfullscreen:"",src:e.url,width:"100%"},on:{fullscreenchange:function(n){return e.updateFullscreen()},webkitfullscreenchange:function(n){return e.updateFullscreen()}}})])])};var i=[]},"./vuejs/components/mediaViewer/viewers/fullscreen.mixin.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;t("./node_modules/core-js/modules/es.object.to-string.js");t("./node_modules/core-js/modules/es.promise.js");t("./node_modules/regenerator-runtime/runtime.js");function r(e,n,t,r,i,s,a){try{var o=e[s](a);var u=o.value}catch(e){t(e);return}if(o.done){n(u)}else{Promise.resolve(u).then(r,i)}}function i(e){return function(){var n=this,t=arguments;return new Promise((function(i,s){var a=e.apply(n,t);function o(e){r(a,i,s,o,u,"next",e)}function u(e){r(a,i,s,o,u,"throw",e)}o(undefined)}))}}var s={data:function e(){return{isFullscreen:false}},methods:{toggleFullscreen:function e(n){var t=this;return i(regeneratorRuntime.mark((function e(){var r,s,a,o;return regeneratorRuntime.wrap((function e(u){while(1){switch(u.prev=u.next){case 0:o=function e(){o=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(n){while(1){switch(n.prev=n.next){case 0:if(!document.exitFullscreen){n.next=5;break}n.next=3;return document.exitFullscreen();case 3:n.next=13;break;case 5:if(!document.webkitExitFullscreen){n.next=10;break}n.next=8;return document.webkitExitFullscreen();case 8:n.next=13;break;case 10:if(!document.msExitFullscreen){n.next=13;break}n.next=13;return document.msExitFullscreen();case 13:case"end":return n.stop()}}}),e)})));return o.apply(this,arguments)};a=function e(){return o.apply(this,arguments)};s=function e(){s=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(t){while(1){switch(t.prev=t.next){case 0:if(!n.requestFullscreen){t.next=5;break}t.next=3;return n.requestFullscreen();case 3:t.next=13;break;case 5:if(!n.webkitRequestFullscreen){t.next=10;break}t.next=8;return n.webkitRequestFullscreen();case 8:t.next=13;break;case 10:if(!n.msRequestFullscreen){t.next=13;break}t.next=13;return n.msRequestFullscreen();case 13:case"end":return t.stop()}}}),e)})));return s.apply(this,arguments)};r=function e(){return s.apply(this,arguments)};t.updateFullscreen();if(!t.isFullscreen){u.next=10;break}u.next=8;return a();case 8:u.next=12;break;case 10:u.next=12;return r();case 12:t.updateFullscreen();case 13:case"end":return u.stop()}}}),e)})))()},updateFullscreen:function e(){this.isFullscreen=!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}}};n.default=s},"./vuejs/components/mediaViewer/viewers/viewer.mixin.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;t("./node_modules/core-js/modules/es.number.constructor.js");var r={props:{fit:Boolean,fill:Boolean,height:Number,media:Object,onDownload:{type:Function,default:function e(){}},width:{required:true,type:Number}}};n.default=r},"./vuejs/components/mediaViewer/waitingPlayer.mixin.js":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;t("./node_modules/core-js/modules/es.object.to-string.js");t("./node_modules/core-js/modules/es.promise.js");t("./node_modules/regenerator-runtime/runtime.js");function r(e,n,t,r,i,s,a){try{var o=e[s](a);var u=o.value}catch(e){t(e);return}if(o.done){n(u)}else{Promise.resolve(u).then(r,i)}}function i(e){return function(){var n=this,t=arguments;return new Promise((function(i,s){var a=e.apply(n,t);function o(e){r(a,i,s,o,u,"next",e)}function u(e){r(a,i,s,o,u,"throw",e)}o(undefined)}))}}var s={props:{media:Object},computed:{hasConversionFailed:function e(){return false},isReady:function e(){return true}},methods:{checkConversionStatus:function e(){var n=this;return i(regeneratorRuntime.mark((function e(){var t,r,s,a,o,u;return regeneratorRuntime.wrap((function e(c){while(1){switch(c.prev=c.next){case 0:u=function e(){u=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function e(n){while(1){switch(n.prev=n.next){case 0:n.next=2;return µ.psleep(r);case 2:r*=2;return n.abrupt("return",true);case 4:case"end":return n.stop()}}}),e)})));return u.apply(this,arguments)};o=function e(){return u.apply(this,arguments)};a=function e(){return!t.isReady&&!t.hasConversionFailed};s=function e(){if(t.isReady){t.$emit("ready")}};t=n;s();r=5e3;case 7:if(!a()){c.next=15;break}c.next=10;return n.fetch();case 10:s();c.next=13;return o();case 13:c.next=7;break;case 15:case"end":return c.stop()}}}),e)})))()},fetch:function e(){}},watch:{"media._id":{immediate:true,handler:function e(){this.checkConversionStatus()}}}};n.default=s}}]);
//# sourceMappingURL=155.24211606.bundle.min.js.map